# Тесты

## Основные тесты

### test:api - Тест подключения к API
**Файл:** `src/test/test-api-connection.ts`
**Команда:** `npm run test:api`

**Назначение:**
- Проверка подключения к CLOB API
- Получение списка рынков
- Проверка доступности данных (цены, orderbook)

**Когда использовать:**
- Первый запуск после установки
- Проверка VPN подключения
- Проверка доступности API

**Не требует:** кошелек, баланс

---

### test:endgame - Анализ возможностей Endgame
**Файл:** `src/test/test-endgame-flexible.ts`
**Команда:** `npm run test:endgame`

**Назначение:**
- Поиск рынков 80-99% вероятности
- Анализ возможностей хеджа
- Расчет потенциальной доходности (ROI, APY)
- Проверка ликвидности

**Когда использовать:**
- Поиск торговых возможностей
- Анализ текущей ситуации на рынках
- Оценка доходности перед запуском бота

**Требует:** кошелек (для API ключей), VPN

**Параметры фильтров:**
- Вероятность: 80-99%
- Объем: без фильтра
- Дата разрешения: без ограничения
- NegRisk: включены

---

### test:liquidity - Проверка ликвидности рынков
**Файл:** `src/test/test-liquidity-service.ts`
**Команда:** `npm run test:liquidity`

**Назначение:**
- Тестирование PolymarketDataService
- Проверка получения orderbook данных
- Расчет реальной ликвидности из bid/ask ордеров
- Анализ топ-3 рынков с деталями

**Когда использовать:**
- Проверка работы сервиса ликвидности
- Анализ реальной ликвидности рынков
- Отладка проблем с ликвидностью

**Требует:** VPN

**Проверяет:**
- Первые 5 рынков 80-99%
- Ликвидность >= $100
- Детали orderbook (bid/ask, spread, depth)

---

### test:volume - Анализ структуры API
**Файл:** `src/test/test-volume-structure.ts`
**Команда:** `npm run test:volume`

**Назначение:**
- Исследование raw данных от API
- Проверка типов данных (volume, liquidity)
- Анализ полей рынков
- Статистика по объемам

**Когда использовать:**
- Отладка проблем с данными API
- Исследование новых полей API
- Понимание структуры ответов

**Требует:** VPN

**Особенность:** API `getSamplingMarkets()` НЕ возвращает volume поля

---

## Устаревшие тесты

### integration-test.ts
**Статус:** УСТАРЕЛ

**Проблемы:**
- Использует BaseStrategy (не актуальную стратегию)
- Параметры не соответствуют текущим стратегиям
- Дублирует функционал test-endgame

**Рекомендация:** УДАЛИТЬ или обновить под актуальную стратегию

---

### test-high-confidence.ts
**Статус:** ЧАСТИЧНО УСТАРЕЛ

**Описание:**
- Тестирует HighConfidenceStrategy (80%+ вероятность)
- Параметры: minVolume: 5000, minPrice: 0.80

**Проблемы:**
- HighConfidenceStrategy менее актуальна чем Endgame
- Требует объем $5000 (многие рынки не проходят)

**Рекомендация:** Оставить для альтернативной стратегии, но приоритет на Endgame

---

### test-endgame.ts (строгий)
**Статус:** УСТАРЕЛ

**Описание:**
- Строгие фильтры: 95-99%, minVolume: 10000, maxDays: 14

**Проблемы:**
- Слишком строгие фильтры - находит 0 рынков
- test-endgame-flexible с гибкими фильтрами более полезен

**Рекомендация:** УДАЛИТЬ, использовать test-endgame-flexible

---

## Рекомендации по очистке

### Удалить:
1. `integration-test.ts` - устарел, не используется
2. `test-endgame.ts` - слишком строгий, заменен на flexible версию

### Оставить:
1. `test-api-connection.ts` - базовая проверка подключения
2. `test-endgame-flexible.ts` - основной анализатор возможностей
3. `test-liquidity-service.ts` - проверка ликвидности
4. `test-volume-structure.ts` - отладка API данных
5. `test-high-confidence.ts` - альтернативная стратегия (опционально)

### Итого: 4 основных теста + 1 опциональный

---

## Команды после очистки

**Основные:**
- `npm run test:api` - проверка подключения
- `npm run test:endgame` - анализ возможностей
- `npm run test:liquidity` - проверка ликвидности

**Отладка:**
- `npm run test:volume` - структура API данных

**Опционально:**
- `npm run test:high` - high confidence стратегия (если нужна)
